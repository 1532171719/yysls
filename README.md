# 燕云抽奖Web应用

一个功能丰富的在线抽奖系统，支持自定义参与者、奖项设置、权重配置和多种抽奖规则。

## 功能特性

- 🎯 **转盘抽奖**：可视化转盘，支持自定义位置和大小
- 👥 **参与者管理**：支持添加参与者、设置权重、导入名单
- 🏆 **奖项管理**：支持添加奖项、设置数量、选择规则、导入奖项
- 📊 **抽奖规则**：
  - **规则1**：抽中不再中，参与者平均分配（不考虑权重）
  - **规则2**：在规则1基础上，其他属于规则2的也不能再抽中，且使用权重概率
- 📝 **中奖历史**：记录所有抽奖历史，支持查看详细记录
- 🎨 **自定义样式**：支持背景图片、标题样式、布局设置
- 💾 **数据持久化**：所有设置自动保存到本地存储

## 快速开始

### 安装依赖

```bash
cd web
npm install
```

### 启动开发服务器

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

## 使用说明

### 1. 设置参与者

1. 进入后台管理（密码：`20251201`）
2. 点击"名单设置"标签
3. 添加参与者，设置姓名和权重
4. 点击"确定人选,开始计算"计算概率
5. 支持导入JSON格式的名单文件

**导入格式示例：**
```json
[
  { "name": "张三", "weight": 1 },
  { "name": "李四", "weight": 2 }
]
```

### 2. 设置奖项

1. 点击"奖项设置"标签
2. 添加奖项，设置名称、数量、规则和图片
3. 点击"保存"
4. 支持导入JSON格式的奖项文件

**导入格式示例：**
```json
[
  {
    "name": "一等奖",
    "quantity": 1,
    "rule": "rule1",
    "image": "/素材库/奖项1.png"
  }
]
```

### 3. 抽奖规则说明

- **规则1（抽中不再中）**：
  - 抽中后该奖项不能再被抽中
  - 参与者平均分配，不考虑权重设置
  - 适合需要公平分配的场合

- **规则2（规则1基础上，其他规则2的也不能再抽中）**：
  - 在规则1的基础上，如果抽中规则2的奖项，其他所有规则2的奖项也不能再抽中
  - 使用权重概率，权重越大，中奖概率越高
  - 适合需要按权重分配的特殊奖项

### 4. 开始抽奖

1. 在首页选择要抽取的奖项（点击左下角奖项图片）
2. 点击"开始抽奖"按钮
3. 转盘旋转后显示中奖结果
4. 查看"中奖历史"可查看所有抽奖记录

### 5. 自定义设置

- **背景设置**：设置背景图片和透明度
- **标题设置**：自定义标题的字体、颜色、大小等
- **布局设置**：调整转盘、奖项列表的位置和大小

## 技术栈

- React 18
- Vite
- Canvas API（转盘绘制）
- LocalStorage（数据持久化）

## 项目结构

```
web/
├── src/
│   ├── components/      # React组件
│   │   ├── HomePage.jsx          # 首页
│   │   ├── AdminPage.jsx          # 后台管理
│   │   ├── LotteryWheel.jsx       # 转盘组件
│   │   ├── ParticipantSettings.jsx # 参与者设置
│   │   ├── AwardSettings.jsx      # 奖项设置
│   │   └── ...
│   ├── utils/           # 工具函数
│   │   ├── storage.js   # 数据存储
│   │   └── draggable.js # 拖拽功能
│   └── App.jsx          # 主应用
└── public/              # 静态资源
    └── 素材库/          # 图片素材
```

## 注意事项

- 后台管理密码：`20251201`
- 图片素材需放在 `public/素材库/` 目录下
- 所有设置会自动保存到浏览器本地存储
- 点击"重新开始"会清除所有抽奖记录和历史
